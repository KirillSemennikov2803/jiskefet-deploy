# /*
#  * Copyright (C) 2018 Amsterdam University of Applied Sciences (AUAS)
#  *
#  * This software is distributed under the terms of the
#  * GNU General Public Licence version 3 (GPL) version 3,
#  * copied verbatim in the file "LICENSE"
#  */

---
- name: install git
  become: yes
  become_user: root
  yum:
    name: git
    state: present

- name: checkout jiskefet-api
  git:
    repo: "{{ repository_url.jiskefet_api }}"
    dest: /var/lib/jiskefet/jiskefet-api
    force: yes
    version: develop

- name: checkout jiskefet-ui
  git:
    repo: "{{ repository_url.jiskefet_ui }}"
    dest: /var/lib/jiskefet/jiskefet-ui
    force: yes
    version: feature/moved-folders

- name: Change api url for jiskefet-ui
  copy:
    dest: /var/lib/jiskefet/jiskefet-ui/src/app/constants.tsx
    content: "{{ api_url_constant }}"

- name: Create ormconfig.json file if it does not exist
  copy:
    dest: /var/lib/jiskefet/jiskefet-api/ormconfig.json
    content: "{{ database_config }}"
...