# /*
#  * Copyright (C) 2018 Amsterdam University of Applied Sciences (AUAS)
#  *
#  * This software is distributed under the terms of the
#  * GNU General Public Licence version 3 (GPL) version 3,
#  * copied verbatim in the file "LICENSE"
#  */

---
- name: run npm install on jiskefet-api
  become: yes
  become_user: "{{ remote_privileged_user }}"
  command: npm install
  args:
    chdir: "/var/lib/jiskefet/jiskefet-api"

- name: run npm install on jiskefet-ui
  become: yes
  become_user: "{{ remote_privileged_user }}"
  command: npm install
  args:
    chdir: "/var/lib/jiskefet/jiskefet-ui"

- name: run npm build on jiskefet-ui
  become: yes
  become_user: "{{ remote_privileged_user }}"
  command: npm run build
  args:
    chdir: "/var/lib/jiskefet/jiskefet-ui"
  notify: restart NGiNX
...